<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
  <script>
    function component(elementNode, attributes, children) {
      let elementStr = `<${elementNode}`;
      for (let key in attributes) {
        elementStr += `${key}="${attributes[key]}"`;
      }
      elementStr += `>`;
      if (children) {
        children.forEach((child) => {
          if (typeof child === "string") {
            elementStr += child;
          } else {
            elementStr += component(
              child.elementNode,
              child.attributes,
              child.children
            );
          }
        });
      }
      elementStr += `</${elementNode}>`;
      return elementStr;
    }

    window.addEventListener("hashchange", () => {
      const contentDiv = document.getElementById("root");
      const hash = window.location.hash.substr(1);

      switch (hash) {
        case "page1":
          contentDiv.innerHTML = component("h1", { style: "color:blue" }, [
            "This is page1",
          ]);
          break;
        case "page2":
          contentDiv.innerHTML = component(
            "div",
            { style: "background-color:cadetblue" },
            [component("h1", {}, ["This is page2"])]
          );
          break;
        case "page3":
          contentDiv.innerHTML = component(
            "div",
            { style: "display:flex; justify-content:center color:#ff2222;" },
            [component("h1", {}, ["This is page3"])]
          );
          break;
        case "page4":
          contentDiv.innerHTML = component(
            "div",
            { style: "display:flex; justify-content:center color:#333;" },
            [component("h1", {}, ["This is page4"])]
          );
          break;
        default:
          component;
          contentDiv.innerHTML = component("h1", {}, [
            "반갑습니다. 접속할 때 보이는 페이지(처럼 보이는) element입니다",
          ]);
      }
    });

    window.dispatchEvent(new Event("hashchange"));
    /**
     * dispachEvent에 대해서는 전부 이해되진 않았다.
     * 그렇기에 예제를 써봐야 한다.
     */
  </script>
</html>
